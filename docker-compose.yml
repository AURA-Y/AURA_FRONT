services:
  frontend:
    build:
      context: .
      dockerfile: Dockerfile
      # [핵심] 빌드 타임 환경 변수 전달 (env.mjs 검증 통과용)
      args:
        - NEXT_PUBLIC_LIVEKIT_URL=${NEXT_PUBLIC_LIVEKIT_URL}
        - NEXT_PUBLIC_API_URL=${NEXT_PUBLIC_API_URL}
    container_name: namanmoo_fe
    ports:
      - "3000:3000"
    # [핵심] 실행(Runtime) 시점 환경 변수 주입
    env_file:
      - .env
    restart: always
